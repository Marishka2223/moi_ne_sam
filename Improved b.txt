
<?php
session_start();
// Подключение к базе данных
$conn = new mysqli("localhost","root","root","shooterki");

if($conn->connect_error){
    die("Ошибка:".$conn->connect_error);
}
// Запрос к базе данных
$query = "SELECT id, name, described, price, image, rate FROM tovar WHERE id > 0";
$result = $conn->query($query);

// Проверка, есть ли записи
if ($result->num_rows > 0) {
    // Вывод записей в ряд по 4
    echo '<div style="display: flex; flex-wrap: wrap;">';
    $count = 0;
    while ($row = $result->fetch_assoc()) {
        echo '<div style="flex: 1 1 25%; padding: 10px;">';
        
        echo  '<img src = "data:image/png;base64,' . base64_encode($row['image']) . '" width = "50px" height = "50px"/>';
        echo '<h2>' . $row['name'] . '</h2>';
        echo '<p>' . $row['described'] . '</p>';
        echo '<p>Рейтинг: ' . $row['rate'] . '</p>';
        echo '</div>';
        $count++;
        if ($count % 4 == 0) {
            echo '</div><div style="display: flex; flex-wrap: wrap;">';
        }
    }
    echo '</div>';
} else {
    // Если записей нет
    echo '<p>Товаров временно нет в наличии</p>';
}

// Закрытие соединения
$conn->close();
?>
